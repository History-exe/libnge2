function(add_nge_executable nm)
  set(_ARGS)
  set(_LIBS)
  set(_IS_LIB)

  foreach(arg ${ARGN})
	if(_IS_LIB)
	  list(APPEND _LIBS ${arg})
	else()
	  if(${arg} STREQUAL "LIBRARIES")
		set(_IS_LIB 1)
	  else()
		list(APPEND _ARGS ${arg})
	  endif()
	endif()
  endforeach()

  add_executable(${nm} WIN32 ${_ARGS})
  SET(_LIBS nge2 ${_LIBS} ${NGE2_LIBS})

  RM_DUP_LIB(_LIBS _LIB_DIRS ${_LIBS})
  LINK_DIRECTORIES(${_LIB_DIRS})
  target_link_libraries(${nm} ${_LIBS})
  if(PSP)
	pack_psp_eboot(${nm})
  endif()
endfunction()

function(add_resource all_res dir)
  set(res)
  foreach(arg ${ARGN})
	list(APPEND res ${dir}/${arg})
  endforeach()
  list(APPEND ${all_res} ${res})
  set(${all_res} ${${all_res}} PARENT_SCOPE)
endfunction()

include(CopyFile)
function(copy_res_files target)
  set(files)

  foreach(arg ${ARGN})
	add_copy_file(files ../res/${arg} ${arg})
  endforeach()
  # message("files : ${files}")
  add_custom_target(${target}_res DEPENDS ${files})
  add_dependencies(${target} ${target}_res)
endfunction()

#demo 3 need pmp mod library.
foreach(i 0 1 2 4 5 6 7 8 9)
  add_subdirectory(demo${i})
endforeach()
